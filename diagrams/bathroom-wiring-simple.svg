<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 970" width="1000" height="970">
    <style>
        .panel { fill: #ffebee; stroke: #f44336; stroke-width: 2; }
        .gfci { fill: #e3f2fd; stroke: #2196f3; stroke-width: 2; }
        .switch { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; }
        .fixture { fill: #e8f5e8; stroke: #4caf50; stroke-width: 2; }
        .junction { fill: #f8f9fa; stroke: #6c757d; stroke-width: 1; }
        .title { font: bold 18px Arial; text-anchor: middle; fill: #2c3e50; }
        .label { font: bold 12px Arial; text-anchor: middle; fill: #2c3e50; }
        .small { font: 9px Arial; text-anchor: middle; fill: #555; }
        .tiny { font: 7px Arial; text-anchor: middle; fill: #333; }
        .spec { font: 8px Arial; fill: #666; }
        .wire-hot { stroke: #000; stroke-width: 2.5; fill: none; }
        .wire-neutral { stroke: #fff; stroke-width: 2.5; fill: none; stroke-dasharray: 4,2; }
        .wire-ground { stroke: #4caf50; stroke-width: 2.5; fill: none; }
        .wire-red { stroke: #f44336; stroke-width: 2.5; fill: none; }
        .wire-white-hot { stroke: #fff; stroke-width: 2.5; fill: none; }
        .cable { stroke: #607d8b; stroke-width: 6; fill: none; opacity: 0.4; }
        .cable-thick { stroke: #795548; stroke-width: 8; fill: none; opacity: 0.4; }
        .warning { font: bold 9px Arial; fill: #f44336; }
        .tape { fill: #000; stroke: none; }
        .terminal { fill: #ffd700; stroke: #b8860b; stroke-width: 1; }
        .screw { fill: #c0c0c0; stroke: #808080; stroke-width: 1; }
    </style>
    
    <!-- Title -->
    <text x="600" y="25" class="title">Bathroom Electrical Wiring Diagram</text>
    
    <!-- Panel -->
    <rect x="50" y="300" width="100" height="150" class="panel" rx="5"/>
    <text x="100" y="320" class="label">Panel</text>
    <text x="100" y="335" class="small">15A Breaker</text>
    <circle cx="130" cy="360" r="2" fill="#000"/>
    <circle cx="130" cy="380" r="2" fill="#fff" stroke="#000"/>
    <circle cx="130" cy="400" r="2" fill="#4caf50"/>
    
    <!-- GFCI -->
    <rect x="200" y="300" width="100" height="150" class="gfci" rx="5"/>
    <text x="250" y="320" class="label">GFCI</text>
    <text x="250" y="335" class="small">15A Outlet</text>
    <rect x="215" y="350" width="30" height="20" fill="#1976d2" rx="2"/>
    <text x="230" y="362" style="font: 8px Arial; fill: white; text-anchor: middle;">LINE</text>
    <rect x="255" y="350" width="30" height="20" fill="#4caf50" rx="2"/>
    <text x="270" y="362" style="font: 8px Arial; fill: white; text-anchor: middle;">LOAD</text>
    <circle cx="280" cy="390" r="2" fill="#000"/>
    <circle cx="280" cy="405" r="2" fill="#fff" stroke="#000"/>
    <circle cx="280" cy="420" r="2" fill="#4caf50"/>
    
    <!-- Vanity Switch 1 -->
    <rect x="350" y="100" width="100" height="150" class="switch" rx="5"/>
    <text x="400" y="120" class="label">Vanity SW1</text>
    <text x="400" y="135" class="small">3-Way Switch</text>
    <rect x="370" y="150" width="60" height="40" fill="#ffc107" rx="3"/>
    <circle cx="385" cy="165" r="3" fill="#000"/>
    <text x="393" y="168" style="font: 7px Arial;">COM</text>
    <circle cx="385" cy="175" r="3" fill="#d4af37"/>
    <text x="393" y="178" style="font: 7px Arial;">T1</text>
    <circle cx="385" cy="185" r="3" fill="#d4af37"/>
    <text x="393" y="188" style="font: 7px Arial;">T2</text>
    <circle cx="415" y="185" r="3" fill="#4caf50"/>
    <text x="423" y="188" style="font: 7px Arial;">GND</text>
    
    <!-- Vanity Light with Junction Box Detail -->
    <rect x="500" y="100" width="100" height="170" class="fixture" rx="5"/>
    <text x="550" y="120" class="label">Vanity Light</text>
    <text x="550" y="125" class="small">LED Multi-Bulb</text>
    <circle cx="550" cy="150" r="20" fill="#ffeb3b" stroke="#ff8f00" stroke-width="2"/>
    <text x="550" y="155" style="font: 10px Arial; text-anchor: middle;">üí°</text>
    <text x="550" y="180" class="small">3-Way Load End</text>
    
    <!-- Individual bulb representation - moved outside main circle -->
    <circle cx="520" cy="140" r="4" fill="#fff300"/>
    <circle cx="535" cy="140" r="4" fill="#fff300"/>
    <circle cx="565" cy="140" r="4" fill="#fff300"/>
    <circle cx="580" cy="140" r="4" fill="#fff300"/>
    
    <!-- Wire nuts in junction - moved down for better spacing -->
    <circle cx="530" cy="220" r="3" fill="#ff5722"/>
    <text x="525" y="235" style="font: 6px Arial;">Hot</text>
    <circle cx="550" cy="220" r="3" fill="#ffeb3b"/>
    <text x="545" y="235" style="font: 6px Arial;">SW</text>
    <circle cx="570" cy="220" r="3" fill="#9e9e9e"/>
    <text x="565" y="235" style="font: 6px Arial;">Neut</text>
    <text x="550" y="250" style="font: 7px Arial; text-anchor: middle;">3 Wire Nuts</text>
    <text x="550" y="260" style="font: 6px Arial; text-anchor: middle;">Load Connection</text>
    
    <!-- Main Switch 2 - Critical Junction Box -->
    <rect x="650" y="300" width="120" height="180" class="switch" rx="5"/>
    <text x="710" y="320" class="label">Main SW2</text>
    <text x="710" y="335" class="small">3-Way + 7-Wire Nuts</text>
    <text x="710" y="350" class="warning">‚ö†Ô∏è Critical Junction</text>
    
    <!-- Switch with detailed terminals -->
    <rect x="670" y="365" width="80" height="50" fill="#ffc107" rx="3" stroke="#000"/>
    <text x="710" y="380" style="font: 8px Arial; text-anchor: middle; font-weight: bold;">3-Way Switch</text>
    
    <!-- Terminal screws with accurate positioning -->
    <circle cx="685" cy="375" r="2" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
    <text x="690" y="378" style="font: 6px Arial;">COM</text>
    <circle cx="710" cy="375" r="2" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
    <text x="715" y="378" style="font: 6px Arial;">T1</text>
    <circle cx="735" cy="375" r="2" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
    <text x="740" y="378" style="font: 6px Arial;">T2</text>
    <circle cx="710" cy="400" r="2" fill="#4caf50" stroke="#000" stroke-width="0.5"/>
    <text x="715" y="403" style="font: 6px Arial;">GND</text>
    
    <!-- Detailed Wire nuts with specific functions -->
    <g transform="translate(670, 430)">
        <!-- First row: Hot Distribution and Load Switches -->
        <circle cx="10" cy="10" r="4" fill="#ff5722" stroke="#000" stroke-width="1"/>
        <text x="10" y="5" style="font: 5px Arial; text-anchor: middle;">RED</text>
        <text x="10" y="23" style="font: 4px Arial; text-anchor: middle;">Hot Dist</text>
        
        <circle cx="30" cy="10" r="4" fill="#ff5722" stroke="#000" stroke-width="1"/>
        <text x="30" y="5" style="font: 5px Arial; text-anchor: middle;">RED</text>
        <text x="30" y="23" style="font: 4px Arial; text-anchor: middle;">ML Load</text>
        
        <circle cx="50" cy="10" r="4" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="50" y="5" style="font: 5px Arial; text-anchor: middle;">GRAY</text>
        <text x="50" y="23" style="font: 4px Arial; text-anchor: middle;">Neut ML</text>
        
        <circle cx="70" cy="10" r="4" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="70" y="5" style="font: 5px Arial; text-anchor: middle;">GRAY</text>
        <text x="70" y="23" style="font: 4px Arial; text-anchor: middle;">Trav 1</text>
        
        <!-- Second row: Travelers and Ground -->
        <circle cx="10" cy="25" r="4" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="10" y="20" style="font: 5px Arial; text-anchor: middle;">GRAY</text>
        <text x="10" y="38" style="font: 4px Arial; text-anchor: middle;">Trav 2</text>
        
        <circle cx="30" cy="25" r="4" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="30" y="20" style="font: 5px Arial; text-anchor: middle;">GRAY</text>
        <text x="30" y="38" style="font: 4px Arial; text-anchor: middle;">VL Neut</text>
        
        <circle cx="50" cy="25" r="4" fill="#4caf50" stroke="#000" stroke-width="1"/>
        <text x="50" y="20" style="font: 5px Arial; text-anchor: middle;">GRN</text>
        <text x="50" y="38" style="font: 4px Arial; text-anchor: middle;">Ground</text>
        
        <text x="40" y="50" style="font: 6px Arial; text-anchor: middle; font-weight: bold;">7 Wire Nuts</text>
        <text x="40" y="58" style="font: 5px Arial; text-anchor: middle;">21 Total Wires</text>
    </g>
    
    <!-- Pigtail connections to switch -->
    <g stroke-width="1">
        <!-- Hot to COM terminal -->
        <line x1="680" y1="440" x2="685" y2="375" stroke="#000"/>
        <!-- Travelers -->
        <line x1="740" y1="440" x2="710" y2="375" stroke="#dc3545"/>
        <line x1="680" y1="455" x2="735" y2="375" stroke="#000"/>
        <!-- Ground -->
        <line x1="720" y1="455" x2="710" y2="400" stroke="#4caf50"/>
    </g>
    
    <!-- Combined Switch Box with Detailed Internal Wiring - Redesigned Layout -->
    <rect x="850" y="450" width="150" height="220" class="switch" rx="5"/>
    <text x="925" y="470" class="label">Combined Box</text>
    <text x="925" y="485" class="small">4"√ó4"√ó2-1/8" Box</text>
    
    <!-- Wire Nuts - Reorganized with better spacing -->
    <g id="wire-nuts-combined-spaced">
        <!-- Top row: Main wire nuts -->
        <!-- Hot Distribution (RED) -->
        <circle cx="870" cy="505" r="6" fill="#ff5722" stroke="#000" stroke-width="1"/>
        <text x="870" y="495" style="font: 6px Arial; text-anchor: middle; font-weight: bold;">RED</text>
        <text x="870" y="490" style="font: 5px Arial; text-anchor: middle;">Hot Dist</text>
        <text x="870" y="520" style="font: 5px Arial; text-anchor: middle;">4-Wire</text>
        
        <!-- Neutral Bundle (GRAY) -->
        <circle cx="925" cy="505" r="6" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="925" y="495" style="font: 6px Arial; text-anchor: middle; font-weight: bold;">GRAY</text>
        <text x="925" y="490" style="font: 5px Arial; text-anchor: middle;">Neutral</text>
        <text x="925" y="520" style="font: 5px Arial; text-anchor: middle;">5-Wire</text>
        
        <!-- Ground Bundle (GREEN) -->
        <circle cx="980" cy="505" r="6" fill="#4caf50" stroke="#000" stroke-width="1"/>
        <text x="980" y="495" style="font: 6px Arial; text-anchor: middle; font-weight: bold;">GRN</text>
        <text x="980" y="490" style="font: 5px Arial; text-anchor: middle;">Ground</text>
        <text x="980" y="520" style="font: 5px Arial; text-anchor: middle;">6-Wire</text>
        
        <!-- Bottom row: Traveler wire nuts -->
        <!-- Red Traveler (GRAY) -->
        <circle cx="890" cy="535" r="5" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="890" y="525" style="font: 5px Arial; text-anchor: middle; font-weight: bold;">GRAY</text>
        <text x="890" y="548" style="font: 5px Arial; text-anchor: middle;">Red Trav</text>
        
        <!-- Black Traveler (GRAY) -->
        <circle cx="960" cy="535" r="5" fill="#9e9e9e" stroke="#000" stroke-width="1"/>
        <text x="960" y="525" style="font: 5px Arial; text-anchor: middle; font-weight: bold;">GRAY</text>
        <text x="960" y="548" style="font: 5px Arial; text-anchor: middle;">Blk Trav</text>
    </g>
    
    <!-- Switches - Moved lower with better spacing -->
    <g id="switches-detailed-spaced">
        <!-- Main Switch 1 (3-way) -->
        <rect x="860" y="575" width="35" height="25" fill="#ffc107" rx="2" stroke="#000"/>
        <text x="877" y="588" style="font: 7px Arial; text-anchor: middle; font-weight: bold;">MS1</text>
        <text x="877" y="597" style="font: 5px Arial; text-anchor: middle;">3-Way</text>
        <!-- Terminal screws -->
        <circle cx="865" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="860" y="572" style="font: 4px Arial;">COM</text>
        <circle cx="877" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="872" y="572" style="font: 4px Arial;">T1</text>
        <circle cx="889" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="884" y="572" style="font: 4px Arial;">T2</text>
        <circle cx="877" cy="592" r="1.5" fill="#4caf50" stroke="#000" stroke-width="0.5"/>
        <text x="872" y="610" style="font: 4px Arial;">GND</text>
        
        <!-- Vanity Switch 2 (3-way) -->
        <rect x="907" y="575" width="35" height="25" fill="#ffc107" rx="2" stroke="#000"/>
        <text x="924" y="588" style="font: 7px Arial; text-anchor: middle; font-weight: bold;">VS2</text>
        <text x="924" y="597" style="font: 5px Arial; text-anchor: middle;">3-Way</text>
        <!-- Terminal screws -->
        <circle cx="912" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="907" y="572" style="font: 4px Arial;">COM</text>
        <circle cx="924" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="919" y="572" style="font: 4px Arial;">T1</text>
        <circle cx="936" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="931" y="572" style="font: 4px Arial;">T2</text>
        <circle cx="924" cy="592" r="1.5" fill="#4caf50" stroke="#000" stroke-width="0.5"/>
        <text x="919" y="610" style="font: 4px Arial;">GND</text>
        
        <!-- Fan Switch (single pole) -->
        <rect x="954" y="575" width="35" height="25" fill="#ffc107" rx="2" stroke="#000"/>
        <text x="971" y="588" style="font: 7px Arial; text-anchor: middle; font-weight: bold;">FAN</text>
        <text x="971" y="597" style="font: 5px Arial; text-anchor: middle;">1-Pole</text>
        <!-- Terminal screws -->
        <circle cx="959" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="954" y="572" style="font: 4px Arial;">LINE</text>
        <circle cx="983" cy="580" r="1.5" fill="#b8860b" stroke="#000" stroke-width="0.5"/>
        <text x="978" y="572" style="font: 4px Arial;">LOAD</text>
        <circle cx="971" cy="592" r="1.5" fill="#4caf50" stroke="#000" stroke-width="0.5"/>
        <text x="966" y="610" style="font: 4px Arial;">GND</text>
    </g>
    
    <!-- Curved Pigtail Connections - More realistic wiring -->
    <g id="pigtails-curved" stroke-width="1" fill="none">
        <!-- Hot pigtails with curves -->
        <path d="M 870 511 Q 867 540 865 580" stroke="#000"/>
        <path d="M 870 511 Q 915 540 959 580" stroke="#000"/>
        
        <!-- Red Traveler pigtails with curves -->
        <path d="M 890 530 Q 885 550 877 580" stroke="#dc3545"/>
        <path d="M 890 530 Q 907 550 924 580" stroke="#dc3545"/>
        
        <!-- Black Traveler pigtails with curves -->
        <path d="M 960 530 Q 925 550 889 580" stroke="#000"/>
        <path d="M 960 530 Q 948 550 936 580" stroke="#000"/>
        
        <!-- Ground pigtails with curves -->
        <path d="M 980 511 Q 930 550 877 592" stroke="#4caf50"/>
        <path d="M 980 511 Q 952 550 924 592" stroke="#4caf50"/>
        <path d="M 980 511 Q 975 550 971 592" stroke="#4caf50"/>
        
        <!-- VS2 special connection (marked white wire) with curve -->
        <path d="M 925 511 Q 918 540 912 580" stroke="#9e9e9e" stroke-dasharray="2,2"/>
    </g>
    
    <!-- Wire connection labels - positioned to avoid overlap -->
    <text x="855" y="558" style="font: 5px Arial;">Hot</text>
    <text x="900" y="558" style="font: 5px Arial;">Trav</text>
    <text x="945" y="558" style="font: 5px Arial;">Neut</text>
    <text x="985" y="558" style="font: 5px Arial;">Gnd</text>
    
    <!-- Box capacity annotation - moved lower -->
    <text x="925" y="620" style="font: 7px Arial; text-anchor: middle; font-weight: bold;">5 Wire Nuts, 3 Switches, 12 Pigtails</text>
    <text x="925" y="632" style="font: 7px Arial; text-anchor: middle;">END OF RUN - 18 Conductor Equivalents</text>
    <text x="925" y="644" style="font: 6px Arial; text-anchor: middle; font-style: italic;">Box Fill: 18/21 (85%) - Code Compliant</text>
    
    <!-- Main Light with Detailed Connections -->
    <rect x="650" y="500" width="100" height="120" class="fixture" rx="5"/>
    <text x="700" y="520" class="label">Main Light</text>
    <text x="700" y="535" class="small">LED Fixture</text>
    <circle cx="700" cy="550" r="20" fill="#ffeb3b" stroke="#ff8f00" stroke-width="2"/>
    <text x="700" y="555" style="font: 10px Arial; text-anchor: middle;">üí°</text>
    <text x="700" y="580" class="small">Pass-Through Box</text>
    
    <!-- Wire connection points -->
    <circle cx="680" cy="595" r="3" fill="#ff5722"/>
    <text x="675" y="607" style="font: 6px Arial;">Hot</text>
    <circle cx="700" cy="595" r="3" fill="#9e9e9e"/>
    <text x="695" y="607" style="font: 6px Arial;">Neut</text>
    <circle cx="720" cy="595" r="3" fill="#4caf50"/>
    <text x="715" y="607" style="font: 6px Arial;">Gnd</text>
    
    <!-- Terminal connections -->
    <line x1="700" y1="570" x2="680" y2="595" stroke="#ff5722" stroke-width="1"/>
    <line x1="700" y1="570" x2="700" y2="595" stroke="#9e9e9e" stroke-width="1"/>
    <line x1="700" y1="570" x2="720" y2="595" stroke="#4caf50" stroke-width="1"/>
    
    <!-- Exhaust Fan with Motor Details -->
    <rect x="450" y="500" width="100" height="140" class="fixture" rx="5"/>
    <text x="500" y="520" class="label">Exhaust Fan</text>
    <text x="500" y="525" class="small">110 CFM Motor</text>
    <circle cx="500" cy="550" r="20" fill="#90a4ae" stroke="#37474f" stroke-width="2"/>
    <text x="500" y="555" style="font: 10px Arial; text-anchor: middle;">üå™Ô∏è</text>
    <text x="500" y="580" class="small">Switch Controlled</text>
    
    <!-- Motor terminal connections - moved down for better spacing -->
    <circle cx="480" cy="610" r="3" fill="#000"/>
    <text x="475" y="622" style="font: 6px Arial;">Hot</text>
    <circle cx="500" cy="610" r="3" fill="#fff" stroke="#000"/>
    <text x="495" y="622" style="font: 6px Arial;">Neut</text>
    <circle cx="520" cy="610" r="3" fill="#4caf50"/>
    <text x="515" y="622" style="font: 6px Arial;">Gnd</text>
    
    <!-- Motor winding representation - moved to avoid text overlap -->
    <circle cx="500" cy="545" r="8" fill="none" stroke="#37474f" stroke-width="1" stroke-dasharray="2,2"/>
    <text x="500" y="575" style="font: 6px Arial; text-anchor: middle;">Motor Winding</text>
    
    <!-- Cable runs -->
    <!-- Panel to GFCI (14-2) -->
    <path class="cable" d="M 150 375 L 200 375"/>
    
    <!-- GFCI to Vanity Switch 1 (14-2) -->
    <path class="cable" d="M 300 375 Q 325 375 325 175 L 350 175"/>
    
    <!-- Vanity Switch 1 to Vanity Light (14-3) -->
    <path class="cable" d="M 450 175 L 500 175"/>
    
    <!-- Vanity Light to Main Switch 2 (14-3) - via cable pass-through -->
    <path class="cable" d="M 600 175 Q 625 175 625 390 L 650 390"/>
    
    <!-- Main Switch 2 to Combined Box (14-3 travelers) -->
    <path class="cable" d="M 770 390 Q 800 390 800 525 L 850 525"/>
    
    <!-- Main Switch 2 to Main Light (14-2 switched output) -->
    <path class="cable" d="M 710 480 L 710 500"/>
    
    <!-- Combined Box to Main Light (return path for main light control) -->
    <path class="cable" d="M 850 575 L 750 575"/>
    
    <!-- Main Light to Exhaust Fan (14-2 pass-through) -->
    <path class="cable" d="M 700 620 Q 650 620 550 620"/>
    
    <!-- Combined Box to Exhaust Fan (14-2 fan control) -->
    <path class="cable" d="M 925 650 Q 925 700 500 700 Q 500 650 500 635"/>
    
    <!-- Individual wires -->
    <!-- Panel to GFCI individual conductors -->
    <line class="wire-hot" x1="150" y1="360" x2="200" y2="360"/>
    <line class="wire-neutral" x1="150" y1="380" x2="200" y2="380"/>
    <line class="wire-ground" x1="150" y1="400" x2="200" y2="400"/>
    
    <!-- GFCI to Vanity Switch 1 individual conductors -->
    <line class="wire-hot" x1="300" y1="360" x2="325" y2="360"/>
    <line class="wire-neutral" x1="300" y1="380" x2="325" y2="380"/>
    <line class="wire-hot" x1="325" y1="165" x2="350" y2="165"/>
    <line class="wire-neutral" x1="325" y1="185" x2="350" y2="185"/>
    
    <!-- Vanity Switch 1 to Vanity Light (14-3 cable) -->
    <line class="wire-hot" x1="450" y1="165" x2="500" y2="165"/>
    <line class="wire-red" x1="450" y1="175" x2="500" y2="175"/>
    <line class="wire-neutral" x1="450" y1="185" x2="500" y2="185"/>
    
    <!-- Additional individual wire connections between major components -->
    <line class="wire-red" x1="600" y1="165" x2="625" y2="165"/>
    <line class="wire-hot" x1="600" y1="175" x2="625" y2="175"/>
    <line class="wire-neutral" x1="600" y1="185" x2="625" y2="185"/>
    
    <!-- Legend -->
    <g transform="translate(50, 50)">
        <rect x="0" y="0" width="200" height="180" fill="#f8f9fa" stroke="#2c3e50" stroke-width="1" rx="3"/>
        <text x="100" y="20" class="label">Legend</text>
        
        <line class="wire-hot" x1="15" y1="35" x2="45" y2="35"/>
        <text x="50" y="39" style="font: 9px Arial;">Hot (Black)</text>
        
        <line class="wire-neutral" x1="15" y1="50" x2="45" y2="50"/>
        <text x="50" y="54" style="font: 9px Arial;">Neutral (White)</text>
        
        <line class="wire-ground" x1="15" y1="65" x2="45" y2="65"/>
        <text x="50" y="69" style="font: 9px Arial;">Ground (Green)</text>
        
        <line class="wire-red" x1="15" y1="80" x2="45" y2="80"/>
        <text x="50" y="84" style="font: 9px Arial;">Traveler (Red)</text>
        
        <line class="cable" x1="15" y1="95" x2="45" y2="95"/>
        <text x="50" y="99" style="font: 9px Arial;">Cable Run</text>
        
        <circle cx="30" cy="115" r="3" fill="#ff5722"/>
        <text x="50" y="119" style="font: 9px Arial;">Red Wire Nut</text>
        
        <circle cx="30" cy="130" r="3" fill="#ffeb3b"/>
        <text x="50" y="134" style="font: 9px Arial;">Yellow Wire Nut</text>
        
        <circle cx="30" cy="145" r="3" fill="#9e9e9e"/>
        <text x="50" y="149" style="font: 9px Arial;">Gray Wire Nut</text>
        
        <circle cx="30" cy="160" r="3" fill="#4caf50"/>
        <text x="50" y="164" style="font: 9px Arial;">Green Wire Nut</text>
    </g>
    
    <!-- Safety notes -->
    <g transform="translate(650, 50)">
        <rect x="0" y="0" width="320" height="100" fill="#ffebee" stroke="#f44336" stroke-width="2" rx="3"/>
        <text x="160" y="20" style="font: bold 11px Arial; text-anchor: middle; fill: #d32f2f;">‚ö†Ô∏è Critical Safety Notes</text>
        <text x="10" y="40" class="warning">‚Ä¢ Main Switch 2 has 7 wire nuts - most complex junction</text>
        <text x="10" y="55" class="warning">‚Ä¢ White wires from vanity carry HOT - mark with black tape</text>
        <text x="10" y="70" class="warning">‚Ä¢ Vanity switching junction occurs at the light fixture</text>
        <text x="10" y="85" class="warning">‚Ä¢ All bathroom circuits require GFCI protection</text>
    </g>
    
    <!-- Cable labels -->
    <text x="175" y="370" style="font: 8px Arial; text-anchor: middle;">14-2</text>
    <text x="325" y="270" style="font: 8px Arial; text-anchor: middle; writing-mode: tb;">14-2</text>
    <text x="475" y="170" style="font: 8px Arial; text-anchor: middle;">14-3</text>
    <text x="625" y="285" style="font: 8px Arial; text-anchor: middle; writing-mode: tb;">14-3</text>
    <text x="800" y="455" style="font: 8px Arial; text-anchor: middle;">14-3A + 14-3B</text>
    <text x="710" y="490" style="font: 8px Arial; text-anchor: middle; writing-mode: tb;">14-2</text>
    <text x="800" y="570" style="font: 8px Arial; text-anchor: middle;">14-2</text>
    <text x="575" y="615" style="font: 8px Arial; text-anchor: middle;">14-2</text>
    <text x="700" y="675" style="font: 8px Arial; text-anchor: middle;">14-2 (Fan Control)</text>
    
    <!-- Technical Specifications and Safety Notes -->
    <g id="technical-specs" transform="translate(20, 720)">
        <rect x="0" y="0" width="960" height="140" fill="#f8f9fa" stroke="#007bff" stroke-width="2" rx="5"/>
        <text x="480" y="20" style="font: 14px Arial; text-anchor: middle; font-weight: bold; fill: #007bff;">TECHNICAL SPECIFICATIONS &amp; SAFETY NOTES</text>
        
        <!-- Left column: Wire specifications -->
        <text x="20" y="40" style="font: 10px Arial; font-weight: bold;">WIRE SPECIFICATIONS:</text>
        <text x="20" y="52" style="font: 8px Arial;">‚Ä¢ 14 AWG Copper THHN/THWN-2</text>
        <text x="20" y="62" style="font: 8px Arial;">‚Ä¢ 15A GFCI-Protected Circuit</text>
        <text x="20" y="72" style="font: 8px Arial;">‚Ä¢ NM-B Cable (Romex) 14-2 &amp; 14-3</text>
        <text x="20" y="82" style="font: 8px Arial;">‚Ä¢ Wire Nuts: RED (4-wire), GRAY (5-6 wire)</text>
        <text x="20" y="92" style="font: 8px Arial;">‚Ä¢ Green for Equipment Grounding</text>
        <text x="20" y="102" style="font: 8px Arial;">‚Ä¢ Brass Terminal Screws on Switches</text>
        
        <!-- Center column: Box fill calculations -->
        <text x="340" y="40" style="font: 10px Arial; font-weight: bold;">BOX FILL CALCULATIONS:</text>
        <text x="340" y="52" style="font: 8px Arial;">‚Ä¢ Combined Box: 18 conductors / 21 max (85%)</text>
        <text x="340" y="62" style="font: 8px Arial;">‚Ä¢ Main SW2: 21 conductors / 21 max (100%)</text>
        <text x="340" y="72" style="font: 8px Arial;">‚Ä¢ 4√ó4√ó2-1/8" boxes minimum required</text>
        <text x="340" y="82" style="font: 8px Arial;">‚Ä¢ Derating: 2 cu.in. per 14 AWG conductor</text>
        <text x="340" y="92" style="font: 8px Arial;">‚Ä¢ Code Compliant per NEC 314.16</text>
        <text x="340" y="102" style="font: 8px Arial;">‚Ä¢ Ground wires count as 1 conductor total</text>
        
        <!-- Right column: Safety warnings -->
        <text x="660" y="40" style="font: 10px Arial; font-weight: bold; fill: #dc3545;">‚ö†Ô∏è SAFETY REQUIREMENTS:</text>
        <text x="660" y="52" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ GFCI protection mandatory for bathroom</text>
        <text x="660" y="62" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ Turn OFF power before wiring</text>
        <text x="660" y="72" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ Professional electrician recommended</text>
        <text x="660" y="82" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ Test GFCI monthly</text>
        <text x="660" y="92" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ Verify all connections secure</text>
        <text x="660" y="102" style="font: 8px Arial; fill: #dc3545;">‚Ä¢ Mark re-identified neutrals</text>
        
        <!-- Bottom note -->
        <text x="480" y="125" style="font: 9px Arial; text-anchor: middle; font-style: italic; fill: #6c757d;">
            This diagram shows code-compliant bathroom wiring with proper GFCI protection, box fill calculations, and wire nut specifications.
        </text>
    </g>
    
    <!-- Legend for wire colors and components -->
    <g id="legend" transform="translate(20, 870)">
        <rect x="0" y="0" width="960" height="80" fill="#e9ecef" stroke="#6c757d" stroke-width="1" rx="3"/>
        <text x="480" y="15" style="font: 12px Arial; text-anchor: middle; font-weight: bold;">COMPONENT LEGEND</text>
        
        <!-- Wire color legend -->
        <text x="20" y="30" style="font: 9px Arial; font-weight: bold;">Wire Colors:</text>
        <line x1="20" y1="35" x2="40" y2="35" stroke="#000" stroke-width="3"/>
        <text x="45" y="38" style="font: 8px Arial;">Black (Hot)</text>
        <line x1="120" y1="35" x2="140" y2="35" stroke="#9e9e9e" stroke-width="3"/>
        <text x="145" y="38" style="font: 8px Arial;">White (Neutral)</text>
        <line x1="220" y1="35" x2="240" y2="35" stroke="#4caf50" stroke-width="3"/>
        <text x="245" y="38" style="font: 8px Arial;">Green (Ground)</text>
        <line x1="320" y1="35" x2="340" y2="35" stroke="#dc3545" stroke-width="3"/>
        <text x="345" y="38" style="font: 8px Arial;">Red (Traveler)</text>
        
        <!-- Component legend -->
        <text x="20" y="55" style="font: 9px Arial; font-weight: bold;">Components:</text>
        <circle cx="30" cy="60" r="4" fill="#ff5722"/>
        <text x="40" y="63" style="font: 8px Arial;">Wire Nut</text>
        <rect x="100" y="56" width="15" height="8" fill="#ffc107" rx="1"/>
        <text x="120" y="63" style="font: 8px Arial;">Switch</text>
        <circle cx="180" cy="60" r="6" fill="#ffeb3b" stroke="#ff8f00"/>
        <text x="195" y="63" style="font: 8px Arial;">Light Fixture</text>
        <rect x="270" y="56" width="20" height="8" fill="#fff3cd" stroke="#000" rx="1"/>
        <text x="295" y="63" style="font: 8px Arial;">Junction Box</text>
        <circle cx="380" cy="60" r="2" fill="#b8860b"/>
        <text x="390" y="63" style="font: 8px Arial;">Terminal Screw</text>
        
        <!-- Terminal identification -->
        <text x="500" y="30" style="font: 9px Arial; font-weight: bold;">Switch Terminals:</text>
        <text x="500" y="42" style="font: 8px Arial;">COM = Common (hot supply)</text>
        <text x="500" y="52" style="font: 8px Arial;">T1, T2 = Traveler terminals</text>
        <text x="500" y="62" style="font: 8px Arial;">GND = Equipment ground</text>
        
        <!-- Wire nut sizes -->
        <text x="700" y="30" style="font: 9px Arial; font-weight: bold;">Wire Nut Sizes:</text>
        <circle cx="710" cy="40" r="3" fill="#ff5722"/>
        <text x="718" y="43" style="font: 8px Arial;">RED: 3-4 #14 AWG</text>
        <circle cx="710" cy="52" r="3" fill="#9e9e9e"/>
        <text x="718" y="55" style="font: 8px Arial;">GRAY: 5-6 #14 AWG</text>
        <circle cx="710" cy="64" r="3" fill="#4caf50"/>
        <text x="718" y="67" style="font: 8px Arial;">GREEN: Ground only</text>
    </g>
</svg>
